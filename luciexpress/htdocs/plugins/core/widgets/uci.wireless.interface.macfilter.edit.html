<div>
	<luci-config-section>
		<luci-config-lines>
			<luci-config-line title="'MAC Filtering'">
				<switch ng-model="filterEnabled" class="green" ng-change="onFilterEnable"></switch>
			</luci-config-line>
		</luci-config-lines>
	</luci-config-section>
	<luci-config-section ng-show="filterEnabled">
		<!--<div class="alert alert-danger">
			<div ng-message="pattern" translate><span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>You must enter a valid MAC address!</div>
		</div>-->
		<luci-config-lines>
			<luci-config-line title="'Access for listed devices'">
				<div class="btn-group">
					<button ng-repeat="mode in [['1','allow'], ['2', 'deny']]" class="btn btn-default" ng-model="interface.macfilter_mode" btn-radio="mode[0]">interface.macfilter.{{mode[1]}}</button>
				</div>
			</luci-config-line>
			<luci-config-line title="'Currently added devices'">
				<table class="table">
					<tr ng-repeat="host in maclist">
						<td>
							<input type="text" class="form-control" ng-model="host.hostname"/>
						</td>
						<td>
							<input type="text" class="form-control" ng-model="host.macaddr" placeholder="xx:xx:xx:xx:xx:xx" ng-pattern="/^([0-9A-F]{2}[:-]){5}([0-9A-F]{2})$/"/>
						</td>
						<td>
							<button class="btn btn-default" ng-click="onDeleteHost(host)"><i class="fa fa-trash-o"></i></button>
						</td>
					</tr>
					<tr>
						<td></td>
						<td></td>
						<td>
							<button class="btn btn-default" ng-click="onAddNewClient()"><i class="fa fa-plus"></i></button>
						</td>
					</tr>
				</table>
			</luci-config-line>
			<luci-config-line title="'Add currently connected hosts to the list'">
				<button class="btn btn-default" ng-click="onAddClients()"><i class="fa fa-plus"></i></button>
			</luci-config-line>
		</luci-config-lines>
	</luci-config-section>
	<modal title="'Add clients to MAC filtering list'" ng-show="showModal" on-accept="onAcceptModal()" on-dismiss="onDismissModal()" dismiss-label="Cancel" accept-label="Save">
		<luci-config>
			<luci-config-section>
				
				<div class="row" ng-repeat="cl in client_list">
					<div class="col-xs-6">
						<label>
							<input type="checkbox" ng-model="cl.checked"/> {{cl.client.hostname}}
						</label>
					</div>
					<div class="col-xs-6">
						<label>{{cl.client.macaddr}}</label>
					</div>
				</div>
			</luci-config-section>
		</luci-config>
	</modal>
</div>

