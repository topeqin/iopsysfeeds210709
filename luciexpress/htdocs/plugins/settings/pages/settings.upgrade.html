<luci-layout-with-sidebar>
	<div ng-controller="SettingsUpgradeCtrl">
		<luci-config-section>
			<luci-config-heading>{{ 'Firmware Upgrade' | translate }}</luci-config-heading>
			<luci-config-info>{{ 'settings.upgrade.info' | translate }}</luci-config-info>
			<luci-config-lines>
				<luci-config-line title="{{'Current Firmware Version'|translate}}">
					<strong>{{config.system.firmware}}</strong>
				</luci-config-line>
			</luci-config-lines>
			<h3>{{'Manual Firmware Upgrade'|translate}}</h3>
			<p>{{'settings.upgrade.manual.info'|translate}}</p>
			<iframe name="postiframe" id="postiframe" style="display: none;" ></iframe>
			<form target="postiframe" name="uploadForm" action="/cgi-bin/luci-upload" method="post" enctype="multipart/form-data" >
				<input type="hidden" name="sessionid" value="{{sessionID}}" />
				<input type="hidden" name="filename" value="{{uploadFilename}}" />
				<luci-config-lines>
					<luci-config-line title="{{'Pick firmware file to upload'|translate}}">
						<input type="file" class="btn btn-default btn-file"  name="filedata" />
					</luci-config-line>
					<luci-config-line title="{{'Start upgrade'|translate}}">
						<button ng-click="onUploadUpgrade()" class="btn btn-lg btn-default">{{'Upgrade'|translate}}</button>
					</luci-config-line>
				</luci-config-lines>
			</form>
			<h3>{{'Online Update'|translate}}</h3>
			<p>{{'settings.upgrade.online.info'|translate}}</p>
			<luci-config-lines>
				<luci-config-line title="">
					<strong ng-show="onlineUpgrade">New version available: {{onlineUpgrade}}</strong>
					<button ng-hide="onlineUpgrade" class="btn btn-lg btn-default">{{'Check for Update'|translate}}</button>
					<button ng-show="onlineUpgrade" class="btn btn-lg btn-default">{{'Upgrade'|translate}}</button>
				</luci-config-line>
			</luci-config-lines>
			<h3>{{'USB Firmware Upgrade'|translate}}</h3>
			<p>{{'settings.upgrade.usb.info'|translate}}</p>
			<luci-config-lines>
				<luci-config-line title="{{usbUpgrade}}" ng-show="usbUpgrade">
					<button class="btn btn-lg btn-default" ng-click="onUpgradeUSB()">{{'Install Upgrade'|translate}}</button>
				</luci-config-line>
				<luci-config-line title="{{usbUpgrade}}" ng-hide="usbUpgrade">
					<button class="btn btn-lg btn-default" ng-click="onCheckUSB()">{{'Check for Update'|translate}}</button>
				</luci-config-line>
			</luci-config-lines>
		</luci-config-section>
	</div>
</luci-layout-with-sidebar>
